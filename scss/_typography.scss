@use "custom-properties" as *;

/* ==========================================================================
   Typography & text colour tokens
   ========================================================================== */

:root {
    /* Background reference */
    --color-bg: #fcfcfc;

    /* Text colours (light theme, near-white background) */
    --color-text-primary: #1e1e1e; /* body text */
    --color-text-heading: #111111; /* headings */
    --color-text-secondary: #444444; /* blockquotes, lead text */
    --color-text-muted: #6b6b6b; /* captions, metadata */
    --color-text-faint: #8a8a8a; /* non-essential */

    /* Links */
    --color-link: var(--color-text-primary);
    --color-link-hover: var(--highlight);
    --underline: var(--highlight);
    --underline-hover: transparent;

    /* Code */
    --color-code-bg: #000000;
    --color-code-fg: #ffffff;

    /* Figures */
    --figure-bg-color: transparent;
    --figure-border-color: #333333;

    /* Font families */
    --font-sans: "Roboto", Verdana, Geneva, Tahoma, sans-serif;
    --font-serif: "Source Serif", Georgia, "Times New Roman", Times, serif;
    --font-serif-sc: "Alegreya SC", Georgia, "Times New Roman", Times, serif;
    --font-mono:
        ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
        "Liberation Mono", monospace;

    /* Font weights */
    --fw-regular: 400;
    --fw-medium: 500;
    --fw-semibold: 600;
    --fw-bold: 700;

    /* Type scale */
    --fs-300: 0.875rem;
    --fs-400: 1rem;
    --fs-500: 1.125rem;
    --fs-600: 1.25rem;
    --fs-700: 1.5rem;
    --fs-800: 2rem;

    /* Line heights */
    --lh-tight: 1.15;
    --lh-body: 1.6;

    /* Spacing (vertical rhythm) */
    --space-1: 0.25rem;
    --space-2: 0.5rem;
    --space-3: 1rem;
    --space-4: 1.5rem;
    --space-5: 3rem;

    /* Links */
    --underline-offset: 0.15em;
    --underline-thickness: from-font;
}

/* ==========================================================================
   Content typography
   ========================================================================== */

html,
body {
    background-color: var(--color-bg);
}

/* Splash / index */
#index main h1 {
    font-family: var(--font-serif);
    text-align: center;
}

/* Main content grid */
.page-grid {
    background-color: var(--color-bg);
    color: var(--color-text-primary);

    /* Headings */
    :is(h1, h2, h3, h4, h5, h6) {
        font-family: var(--font-sans);
        color: var(--color-text-heading);
        margin-block-start: var(--space-4);
        line-height: var(--lh-tight);
        text-wrap: balance;
    }

    h1 {
        font-weight: var(--fw-bold);
        font-size: var(--fs-800);
        text-align: center;
    }

    h2 {
        font-weight: var(--fw-semibold);
        font-size: var(--fs-700);
    }

    h3 {
        font-weight: var(--fw-semibold);
        font-size: var(--fs-600);
    }

    h4 {
        font-weight: var(--fw-medium);
        font-size: var(--fs-500);
    }

    h5 {
        font-weight: var(--fw-medium);
        font-size: var(--fs-400);
    }

    h6 {
        font-weight: var(--fw-medium);
        font-size: var(--fs-300);
    }

    /* Spacing after headings */
    h1 + * {
        margin-block-start: var(--space-4);
    }
    //sections will have their own headers with margins
    h1 + section {
        margin-block-start: 0;
    }

    h2 + * {
        margin-block-start: var(--space-2);
    }
    h3 + * {
        margin-block-start: var(--space-1);
    }
    h4 + *,
    h5 + *,
    h6 + * {
        margin-block-start: 0;
    }

    /* Paragraphs */
    p {
        font-family: var(--font-sans);
        font-size: var(--fs-400);
        line-height: var(--lh-body);
        font-weight: var(--fw-regular);
        color: var(--color-text-primary);
        margin-block-start: var(--space-2);
        text-wrap: pretty;
    }

    /* Links */
    a,
    a:visited {
        color: var(--color-link);
        text-decoration: underline;
        text-decoration-color: var(--underline);
        text-underline-offset: var(--underline-offset);
        text-decoration-thickness: var(--underline-thickness);
        transition:
            color 0.25s ease,
            text-decoration-color 0.25s ease;
        overflow-wrap: anywhere;
    }

    a:hover,
    a:focus-visible {
        color: var(--color-link-hover);
        text-decoration-color: var(--underline-active);
    }

    /* Vertical rhythm between blocks */
    p + *,
    ul + *,
    ol + *,
    blockquote + * {
        margin-block-start: var(--space-4);
    }

    * + figure,
    * + video,
    figure + *,
    video + * {
        margin-block-start: var(--space-5);
    }

    /* Blockquotes */
    blockquote {
        font-family: var(--font-serif);
        font-style: italic;
        font-size: var(--fs-400);
        line-height: var(--lh-body);
        color: var(--color-text-secondary);
        margin-inline-start: var(--space-3);
        padding-inline-start: var(--space-3);
        border-inline-start: 3px solid var(--figure-border-color);

        .blockquote-footer {
            display: block;
            margin-block-start: var(--space-2);
            text-align: right;
            font-family: var(--font-sans);
            font-size: var(--fs-300);
            font-style: normal;
            color: var(--color-text-muted);
        }

        @media (min-width: $desktop-sm) and (min-height: 500px) {
            font-size: var(--fs-500);
        }
    }

    /* Lists */
    :is(ul, ol) {
        font-family: var(--font-sans);
        font-size: var(--fs-400);
        line-height: var(--lh-body);
        font-weight: var(--fw-regular);
        color: var(--color-text-primary);
    }

    ul {
        list-style: disc outside;
        margin-inline-start: 1.25rem;
    }

    ol {
        list-style: decimal outside;
        margin-inline-start: 1.5rem;
    }

    li > ul,
    li > ol {
        margin-block: var(--space-1);
    }

    /* Code */
    pre {
        max-width: 100%;
        overflow-x: auto;
        background-color: var(--color-code-bg);
        padding: var(--space-2);
        border-radius: 0.5rem;
    }

    code {
        font-family: var(--font-mono);
        font-size: 0.95em;
    }

    pre code {
        color: var(--color-code-fg);
        font-size: var(--fs-300);
    }

    /* Figures */
    figure {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: var(--space-2);
        background-color: var(--figure-bg-color);
    }

    figure > img {
        border: 1px solid var(--figure-border-color);
    }

    figure:has(img.portrait) {
        grid-column: content;
    }

    figcaption {
        font-family: var(--font-sans);
        font-size: var(--fs-300);
        line-height: var(--lh-body);
        color: var(--color-text-muted);
        align-self: flex-start;
    }

    /* Maps */
    div[id*="map"] {
        margin-block: var(--space-4);
    }
}
